<?xml version="1.0" encoding="utf-8"?>

<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:models="clr-namespace:TB.DanceDance.Mobile.Models"
             xmlns:pageModels="clr-namespace:TB.DanceDance.Mobile.PageModels"
             xmlns:toolkit="http://schemas.microsoft.com/dotnet/2022/maui/toolkit"
             xmlns:storage="clr-namespace:Microsoft.Maui.Storage;assembly=Microsoft.Maui.Essentials"
             x:DataType="pageModels:UploadGroupVideoPageModel"
             x:Name="UploadGroupVideoPageName"
             x:Class="TB.DanceDance.Mobile.Pages.UploadGroupVideoPage">
    <ContentPage.Behaviors>
        <toolkit:EventToCommandBehavior
            EventName="Appearing"
            BindingContext="{Binding Path=BindingContext, 
        Source={x:Reference UploadGroupVideoPageName}, 
        x:DataType=pageModels:UploadGroupVideoPageModel}"
            Command="{Binding AppearingCommand}">
        </toolkit:EventToCommandBehavior>
    </ContentPage.Behaviors>
    <ContentPage.Content>
        <Grid>
            <VerticalStackLayout>
            <Picker
                ItemsSource="{Binding Groups}"
                ItemDisplayBinding="{Binding Name}"
                SelectedIndex="{Binding SelectedGroupIndex}"
                Title="Select a group">
            </Picker>
            <Label Text="{Binding SelectedVideoName}"></Label>
            <Button Text="Pick Videos" Command="{Binding PickVideosCommand}" />
            <VerticalStackLayout
                BindableLayout.ItemsSource="{Binding SelectedFiles}">
                <BindableLayout.ItemTemplate>
                    <DataTemplate x:DataType="storage:FileResult">
                        <Border>
                            <VerticalStackLayout Padding="10">
                                <Label Text="{Binding FileName}" FontSize="24" />
                            </VerticalStackLayout>
                        </Border>
                    </DataTemplate>
                </BindableLayout.ItemTemplate>
            </VerticalStackLayout>
            <Button Text="Upload" IsEnabled="{Binding UploadButtonEnabled}" Command="{Binding UploadSelectedVideosCommand}" />
            </VerticalStackLayout>
        </Grid>
    </ContentPage.Content>
</ContentPage>